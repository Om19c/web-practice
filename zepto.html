<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zepto Store — 10-Min Grocery (Demo)</title>
<style>
  :root{
    --accent:#0b71ff;
    --muted:#6b7280;
    --bg:#f7fafc;
    --card:#ffffff;
    --glass: rgba(255,255,255,0.6);
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  body{margin:0; background:linear-gradient(180deg,#f8fbff 0%, var(--bg) 100%); color:#0f1724; -webkit-font-smoothing:antialiased}
  header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;background:transparent;position:sticky;top:0;backdrop-filter: blur(6px);z-index:40;}
  .brand{display:flex;align-items:center;gap:12px;font-weight:700}
  .logo{width:44px;height:44px;background:linear-gradient(135deg,var(--accent),#32b6ff);display:grid;place-items:center;color:#fff;border-radius:10px;font-weight:800}
  nav{display:flex;gap:12px;align-items:center}
  nav a{color:var(--muted);text-decoration:none;font-weight:600;padding:8px 10px;border-radius:8px}
  .cta{background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer;border:none}
  .container{max-width:1100px;margin:26px auto;padding:0 18px}
  .hero{display:grid;grid-template-columns:1fr 420px;gap:24px;align-items:center;margin-bottom:22px}
  .hero-card{background:linear-gradient(180deg,rgba(255,255,255,0.9),var(--glass));padding:26px;border-radius:14px;box-shadow:0 6px 20px rgba(11,113,255,0.06)}
  .hero h1{margin:0;font-size:28px}
  .sub{color:var(--muted);margin-top:8px}
  .searchbar{display:flex;gap:10px;margin-top:16px}
  .searchbar input{flex:1;padding:12px;border-radius:10px;border:1px solid #e6eef9}
  .searchbar button{padding:12px;border-radius:10px;background:#eaf5ff;border:1px solid #d0e9ff;cursor:pointer}
  .fast-info{margin-top:18px;display:flex;gap:10px;flex-wrap:wrap}
  .pill{background:#fff;padding:8px 12px;border-radius:999px;border:1px solid #eef5ff;font-weight:600}
  /* Product grid */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}
  .card{background:var(--card);padding:12px;border-radius:12px;border:1px solid #eef3ff;display:flex;flex-direction:column;gap:10px}
  .thumb{height:120px;border-radius:10px;background:#f1f7ff;display:grid;place-items:center}
  .prod-title{font-weight:700;font-size:15px}
  .price{font-weight:800}
  .muted{color:var(--muted);font-size:13px}
  .actions{display:flex;gap:8px;margin-top:auto}
  .btn{flex:1;padding:8px;border-radius:8px;border:none;cursor:pointer}
  .btn-primary{background:var(--accent);color:#fff}
  .btn-ghost{background:#f3f6ff;border:1px solid #e6f0ff}
  /* cart */
  .cart-btn{position:relative}
  .badge{position:absolute;top:-6px;right:-6px;background:#ff4d4f;color:#fff;padding:4px 7px;border-radius:999px;font-weight:700;font-size:12px}
  .cart-panel{position:fixed;right:18px;top:80px;width:360px;background:var(--card);border-radius:14px;box-shadow: 0 8px 30px rgba(2,6,23,0.12);padding:12px;z-index:60;display:flex;flex-direction:column;max-height:72vh;overflow:auto}
  .cart-item{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;border-bottom:1px dashed #eef4ff}
  .cart-empty{padding:28px;text-align:center;color:var(--muted)}
  .checkout{margin-top:12px;padding:12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),#2fb1ff);color:#fff;font-weight:800;cursor:pointer}
  /* modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.35);display:grid;place-items:center;z-index:80}
  .modal{background:var(--card);padding:18px;border-radius:12px;width:min(720px,95vw)}
  footer{margin-top:36px;padding:26px 0;color:var(--muted);font-size:14px;text-align:center}
  /* responsive */
  @media (max-width:880px){
    .hero{grid-template-columns:1fr}
    .cart-panel{right:10px;left:10px;width:auto;top:auto;bottom:10px;max-height:50vh}
  }
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo">Z</div>
    <div>
      <div>Zepto Demo</div>
      <div style="font-size:12px;color:var(--muted)">10-min grocery — demo UI</div>
    </div>
  </div>

  <nav>
    <a href="#products">Products</a>
    <a href="#how">How it works</a>
    <a href="#contact">Contact</a>
    <button class="cta" id="open-cart">Cart <span id="cart-count" class="badge" style="display:none">0</span></button>
  </nav>
</header>

<main class="container">
  <section class="hero">
    <div class="hero-card">
      <h1>Groceries, delivered fast — Zepto demo</h1>
      <p class="sub">This demo replicates a simple Zepto-style storefront: products, cart, and quick checkout simulation. Use it to prototype UI or front-end interactions.</p>

      <div class="searchbar" style="margin-top:18px">
        <input id="search" placeholder="Search for fruits, snacks, dairy, bread..." />
        <button id="clear-search">Clear</button>
      </div>

      <div class="fast-info">
        <div class="pill">10-min delivery (demo)</div>
        <div class="pill">Multiple dark stores</div>
        <div class="pill">Real-time stock (simulated)</div>
      </div>

      <div style="margin-top:14px;display:flex;gap:8px">
        <button class="btn btn-primary" id="btn-sample">Load sample cart</button>
        <button class="btn btn-ghost" id="btn-reset">Reset demo</button>
      </div>
    </div>

    <aside class="hero-card" style="display:flex;flex-direction:column;gap:12px">
      <div style="display:flex;align-items:center;gap:12px">
        <div style="width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,#ff9a3c,#ff5e7a);display:grid;place-items:center;color:white;font-weight:800;font-size:20px">JS</div>
        <div>
          <div style="font-weight:800">Dark store: Andheri (demo)</div>
          <div class="muted">Estimate: 7–12 mins</div>
        </div>
      </div>
      <div style="border-radius:8px;padding:12px;background:#fff;border:1px solid #f0f7ff">
        <div style="font-weight:800">Why this DB matters</div>
        <div class="muted" style="margin-top:8px;font-size:13px">
          To support 10-minute deliveries Zepto uses real-time inventory, order tracking and delivery assignments. This demo is front-end only — for DB design see the case study. :contentReference[oaicite:1]{index=1}
        </div>
      </div>
    </aside>
  </section>

  <section id="products">
    <h2 style="margin-bottom:12px">Popular near you</h2>
    <div class="grid" id="product-grid">
      <!-- product cards inserted by JS -->
    </div>
  </section>

  <section id="how" style="margin-top:18px">
    <h3>How it works (demo)</h3>
    <p class="muted" style="max-width:720px">
      This front-end demonstrates user management, product listing, order placement and a simulated delivery flow. In production you'd connect this to APIs and a database (users, products, orders, deliveries). See your DBMS case study for example schemas. :contentReference[oaicite:2]{index=2}
    </p>
  </section>

  <section id="contact" style="margin-top:18px">
    <h3>Contact</h3>
    <p class="muted">This demo was generated for a coursework / prototype. Replace product data and wire to your backend to make it production-ready.</p>
  </section>

  <footer>Zepto Demo — single-file UI • Not affiliated with Zepto</footer>
</main>

<!-- Cart panel (hidden until open) -->
<div id="cartPanel" class="cart-panel" style="display:none">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div style="font-weight:800">Your cart</div>
    <button id="closeCart" style="background:transparent;border:none;cursor:pointer">✕</button>
  </div>
  <div id="cartItems" style="margin-top:10px"></div>
  <div id="cartSummary" style="margin-top:12px">
    <div style="display:flex;justify-content:space-between"><div class="muted">Subtotal</div><div id="subtotal">₹0</div></div>
    <div style="display:flex;justify-content:space-between;margin-top:8px"><div class="muted">Delivery</div><div id="deliveryFee">₹29</div></div>
    <div style="display:flex;justify-content:space-between;font-weight:800;margin-top:12px"><div>Total</div><div id="total">₹0</div></div>
    <button class="checkout" id="checkoutBtn">Checkout</button>
  </div>
</div>

<!-- Modal -->
<div id="modalRoot" style="display:none"></div>

<script>
/* ---------- sample product data ---------- */
const products = [
  {id:1,name:"Bananas (1kg)",cat:"Fruits",price:49,stock:20,desc:"Ripe yellow bananas — ready to eat."},
  {id:2,name:"Whole Milk (1L)",cat:"Dairy",price:65,stock:12,desc:"Fresh pasteurised whole milk."},
  {id:3,name:"Brown Bread (Loaf)",cat:"Bakery",price:40,stock:8,desc:"Soft whole wheat loaf."},
  {id:4,name:"Maggi Noodles (2-pack)",cat:"Instant",price:38,stock:30,desc:"Quick & tasty instant noodles."},
  {id:5,name:"Eggs (6 pcs)",cat:"Dairy",price:60,stock:10,desc:"Farm-fresh eggs (6)."},
  {id:6,name:"Apples (1kg)",cat:"Fruits",price:149,stock:6,desc:"Crisp red apples."},
  {id:7,name:"Potato (1kg)",cat:"Vegetables",price:22,stock:50,desc:"Starchy potatoes for cooking."},
  {id:8,name:"Peanut Butter (200g)",cat:"Spreads",price:199,stock:4,desc:"Smooth peanut butter."}
];

let state = {
  products: products.map(p=>({...p})),
  cart: {}, // id -> qty
  showCart: false
};

/* ---------- helpers ---------- */
const $ = (sel)=>document.querySelector(sel);
const $$ = (sel)=>Array.from(document.querySelectorAll(sel));
const formatR = (n)=>`₹${n.toFixed(0)}`;

/* ---------- render product grid ---------- */
function renderGrid(filter=""){
  const grid = document.getElementById('product-grid');
  grid.innerHTML = "";
  const list = state.products.filter(p=>{
    if(!filter) return true;
    const s = filter.toLowerCase();
    return p.name.toLowerCase().includes(s) || p.cat.toLowerCase().includes(s) || (p.desc||"").toLowerCase().includes(s);
  });
  if(list.length===0){
    grid.innerHTML = '<div style="grid-column:1/-1;padding:18px;background:#fff;border-radius:10px;text-align:center;color:var(--muted)">No products found</div>';
    return;
  }
  list.forEach(p=>{
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `
      <div style="display:flex;gap:10px;align-items:center">
        <div class="thumb">${svgFor(p.name)}</div>
        <div style="flex:1">
          <div class="prod-title">${escapeHtml(p.name)}</div>
          <div class="muted">${escapeHtml(p.cat)} • ${p.stock} in stock</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:10px">
        <div>
          <div class="price">${formatR(p.price)}</div>
          <div class="muted" style="font-size:13px">per unit</div>
        </div>
        <div style="margin-left:auto;text-align:right">
          <button class="btn btn-ghost" data-action="view" data-id="${p.id}">View</button>
          <button class="btn btn-primary" data-action="add" data-id="${p.id}">Add</button>
        </div>
      </div>
    `;
    grid.appendChild(div);
  });
}

/* simple inline SVG placeholder based on product name initial */
function svgFor(name){
  const initial = name ? name.trim()[0].toUpperCase() : "P";
  const bg = ["#ffd3a5","#b6e3ff","#f7d6ff","#e0ffd8","#ffe6e6"][initial.charCodeAt(0)%5];
  return `<div style="width:86px;height:86px;border-radius:8px;background:${bg};display:grid;place-items:center;font-weight:800;font-size:20px;color:#1f2937">${initial}</div>`;
}

/* escape */
function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* ---------- cart handling ---------- */
function updateCartCount(){
  const count = Object.values(state.cart).reduce((a,b)=>a+b,0);
  const badge = $('#cart-count');
  if(count>0){ badge.style.display='inline-block'; badge.textContent = count; } else badge.style.display='none';
}

function openCart(){
  $('#cartPanel').style.display='flex';
  renderCartItems();
}
function closeCart(){ $('#cartPanel').style.display='none'; }

function addToCart(id, qty=1){
  const prod = state.products.find(p=>p.id==id);
  if(!prod) return alert('Product not found');
  if(prod.stock <= 0) return alert('Out of stock');
  state.cart[id] = (state.cart[id]||0) + qty;
  // don't exceed stock
  if(state.cart[id] > prod.stock) state.cart[id] = prod.stock;
  updateCartCount();
  if(state.showCart) renderCartItems();
}

function removeFromCart(id){
  delete state.cart[id];
  updateCartCount();
  renderCartItems();
}

function changeQty(id, qty){
  const prod = state.products.find(p=>p.id==id);
  if(qty < 1) { removeFromCart(id); return; }
  if(qty > prod.stock) qty = prod.stock;
  state.cart[id] = qty;
  updateCartCount();
  renderCartItems();
}

function computeTotals(){
  const sub = Object.entries(state.cart).reduce((s,[id,q])=>{
    const p = state.products.find(x=>x.id==id);
    return s + (p ? p.price * q : 0);
  },0);
  const delivery = sub>0 ? 29 : 0;
  return {sub,delivery,total:sub+delivery};
}

function renderCartItems(){
  const container = $('#cartItems');
  container.innerHTML = '';
  const entries = Object.entries(state.cart);
  if(entries.length === 0){
    container.innerHTML = '<div class="cart-empty">Your cart is empty. Add items to get started.</div>';
    $('#subtotal').textContent = '₹0';
    $('#total').textContent = '₹0';
    return;
  }
  entries.forEach(([id,qty])=>{
    const p = state.products.find(x=>x.id==id);
    const el = document.createElement('div');
    el.className = 'cart-item';
    el.innerHTML = `
      <div style="width:54px;height:54px;border-radius:8px;background:#fbfcff;display:grid;place-items:center">${svgFor(p.name)}</div>
      <div style="flex:1">
        <div style="font-weight:700">${escapeHtml(p.name)}</div>
        <div class="muted"> ${escapeHtml(p.cat)} • ${formatR(p.price)} </div>
      </div>
      <div style="text-align:right">
        <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
          <div>
            <button style="padding:6px;border-radius:8px;border:1px solid #e6eef9;background:#fff;margin-right:6px" data-decr="${p.id}">−</button>
            <span style="font-weight:800">${qty}</span>
            <button style="padding:6px;border-radius:8px;border:1px solid #e6eef9;background:#fff;margin-left:6px" data-incr="${p.id}">+</button>
          </div>
          <div class="muted" style="font-size:13px">${formatR(p.price * qty)}</div>
          <button style="margin-top:6px;background:transparent;border:none;color:#ff4d4f;cursor:pointer" data-remove="${p.id}">Remove</button>
        </div>
      </div>
    `;
    container.appendChild(el);
  });
  const totals = computeTotals();
  $('#subtotal').textContent = formatR(totals.sub);
  $('#total').textContent = formatR(totals.total);
}

/* ---------- product view modal ---------- */
function openProductModal(id){
  const p = state.products.find(x=>x.id==id);
  if(!p) return;
  const root = document.getElementById('modalRoot');
  root.style.display='grid';
  root.innerHTML = `
    <div class="modal-backdrop" id="modalBackdrop">
      <div class="modal" role="dialog" aria-modal="true">
        <div style="display:flex;gap:12px">
          <div style="width:120px">${svgFor(p.name)}</div>
          <div style="flex:1">
            <h2 style="margin:0">${escapeHtml(p.name)}</h2>
            <div class="muted" style="margin-top:6px">${escapeHtml(p.cat)} • ${p.stock} in stock</div>
            <p style="margin-top:12px">${escapeHtml(p.desc||'')}</p>
            <div style="display:flex;gap:10px;margin-top:12px">
              <div style="font-weight:800;font-size:18px">${formatR(p.price)}</div>
              <button id="modalAdd" class="btn btn-primary" style="padding:8px 12px">Add to cart</button>
              <button id="modalClose" class="btn btn-ghost" style="padding:8px 12px">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  `;
  document.getElementById('modalBackdrop').addEventListener('click', (e)=>{
    if(e.target.id === 'modalBackdrop') closeModal();
  });
  document.getElementById('modalClose').addEventListener('click', closeModal);
  document.getElementById('modalAdd').addEventListener('click', ()=>{
    addToCart(p.id,1);
    closeModal();
    openCart();
  });
}
function closeModal(){
  const root = document.getElementById('modalRoot');
  root.style.display='none'; root.innerHTML='';
}

/* ---------- events ---------- */
document.addEventListener('click', (e)=>{
  const add = e.target.closest('[data-action="add"]');
  if(add){ addToCart(add.dataset.id|0,1); return; }
  const view = e.target.closest('[data-action="view"]');
  if(view){ openProductModal(view.dataset.id|0); return; }
  if(e.target.id === 'open-cart'){ state.showCart = true; openCart(); }
  if(e.target.id === 'closeCart'){ state.showCart = false; closeCart(); }
  if(e.target.dataset.remove){ removeFromCart(e.target.dataset.remove|0); }
  if(e.target.dataset.incr){ changeQty(e.target.dataset.incr|0, (state.cart[e.target.dataset.incr]||0)+1); }
  if(e.target.dataset.decr){ changeQty(e.target.dataset.decr|0, (state.cart[e.target.dataset.decr]||0)-1); }
  if(e.target.id === 'checkoutBtn'){
    const totals = computeTotals();
    if(totals.sub <= 0){ alert('Cart is empty'); return; }
    // simulate checkout
    alert('Order placed! Total: ' + formatR(totals.total) + '\\n(Delivery in ~10 minutes — demo)');
    // decrement stock
    Object.entries(state.cart).forEach(([id,qty])=>{
      const p = state.products.find(x=>x.id==id);
      if(p){ p.stock = Math.max(0, p.stock - qty); }
    });
    state.cart = {};
    updateCartCount();
    renderGrid($('#search').value);
    renderCartItems();
    closeCart();
  }
});

/* search */
$('#search').addEventListener('input', (e)=>{ renderGrid(e.target.value); });
$('#clear-search').addEventListener('click', ()=>{ $('#search').value=''; renderGrid(''); });

/* sample/load/reset */
$('#btn-sample').addEventListener('click', ()=>{
  addToCart(1,2); addToCart(4,1); addToCart(2,1);
  openCart();
});
$('#btn-reset').addEventListener('click', ()=>{
  state.products = products.map(p=>({...p}));
  state.cart = {};
  updateCartCount();
  renderGrid('');
  renderCartItems();
});

/* initialize */
renderGrid('');
updateCartCount();
</script>

</body>
</html>
